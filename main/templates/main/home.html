{% extends 'base.html' %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}
{% block content %}

    <section class="intro">
        <h2>ã¿ã‚“ãªã®æ‰‹ã¨æ‰‹ã§ã¤ãªãŒã‚‹å­è‚²ã¦</h2>
    </section>
    <div class="features">
        <a href="{% url 'search_allowed' %}" class="feature-card">
            <div class="icon">ğŸ“</div>
            <h3>èªå¯ä¿è‚²æ–½è¨­æ¤œç´¢</h3>
            <p>è¿‘ãã®èªå¯ä¿è‚²æ–½è¨­ã‚„å­è‚²ã¦æ”¯æ´æ–½è¨­ã‚’æ¢ã™</p>
        </a>
    
        <a href="{% url 'search_disallowed' %}" class="feature-card">
            <div class="icon">ğŸš©</div>
            <h3>èªå¯å¤–ä¿è‚²æ–½è¨­æ¤œç´¢</h3>
            <p>è¿‘ãã®èªå¯å¤–ä¿è‚²æ–½è¨­ã‚„å­è‚²ã¦æ”¯æ´æ–½è¨­ã‚’æ¢ã™</p>
        </a>
    
        <a href="{% url 'inquiry_list' %}" class="feature-card">
            <div class="icon">ğŸ§</div>
            <h3>ç›¸è«‡æ¤œç´¢</h3>
            <p>å­è‚²ã¦ã«é–¢ã™ã‚‹ã¿ã‚“ãªã®æ‚©ã¿ã‚’è¦‹ã‚‹</p>
        </a>
    {% if user.is_authenticated and user.user_type == 'inquirer' %}
        <a href="{% url 'inquiry_create' %}" class="feature-card">
            <div class="icon">ğŸ“ª</div>
            <h3>ç›¸è«‡ã‚’æŠ•ç¨¿</h3>
            <p>å­è‚²ã¦ã«é–¢ã™ã‚‹æ‚©ã¿ã‚’ç›¸è«‡ã™ã‚‹</p>
        </a>
    {% endif %}
        <a href="{% url 'chat_list' %}" class="feature-card">
            <div class="icon">ğŸ’¬</div>
            <h3>ãƒãƒ£ãƒƒãƒˆ</h3>
            <p>ä¿¡é ¼ã§ãã‚‹ç›¸è«‡ç›¸æ‰‹ã¨è©±ã™</p>
        </a>

        <a href="{% url 'child_support_list' %}" class="feature-card">
            <div class="icon">ğŸ“º</div>
            <h3>å­è‚²ã¦æ”¯æ´æƒ…å ±</h3>
            <p>å­è‚²ã¦ã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã¿ã‚‹</p>
        </a>
    </div>
 
    
    <div class="home-container">
        <h2>ãŠçŸ¥ã‚‰ã›</h2>
        <ul class="announcement-list">
            {% for announcement in announcements %}
            <li class="announcement-item">
                <a href="{% url 'announcement_detail' announcement.pk %}" class="announcement-link">
                    {{ announcement.title }} - {{ announcement.date }}
                </a>
            </li>
            {% endfor %}
        </ul>
        <div class="pagination">
            <span class="step-links">
            {% if announcements.has_previous %}
                <a href="?page_announcement={{ announcements.previous_page_number }}#announcements">&laquo; å‰ã¸</a>
            {% endif %}
            <span class="current">
                ãƒšãƒ¼ã‚¸ {{ announcements.number }} / {{ announcements.paginator.num_pages }}
            </span>
            {% if announcements.has_next %}
                <a href="?page_announcement={{ announcements.next_page_number }}#announcements">æ¬¡ã¸ &raquo;</a>
            {% endif %}
            </span>
        </div>
    </div>




<div class="home-container" id="new_inquiries">
    <h2>æ–°ç€ã®ç›¸è«‡</h2>
    <ul class="inquiry-list">
        {% for inquiry in new_inquiries %}
        <li class="inquiry-item">
            <a href="{% url 'inquiry_detail' inquiry.pk %}" class="inquiry-link">{{ inquiry.title }} - {{ inquiry.created_at }}</a>
        </li>
        {% endfor %}
    </ul>

    <div class="pagination">
        <span class="step-links">
        {% if new_inquiries.has_previous %}
            <a href="?page_new={{ new_inquiries.previous_page_number }}#new_inquiries">&laquo; å‰ã¸</a>
        {% endif %}
        <span class="current">
            ãƒšãƒ¼ã‚¸ {{ new_inquiries.number }} / {{ new_inquiries.paginator.num_pages }}
        </span>
        {% if new_inquiries.has_next %}
            <a href="?page_new={{ new_inquiries.next_page_number }}#new_inquiries">æ¬¡ã¸ &raquo;</a>
        {% endif %}
    </span>
    </div>
</div>

<div class="home-container" id="popular_inquiries">
    <h2>æ–°ç€ã®å­è‚²ã¦æ”¯æ´æƒ…å ±</h2>
    <ul class="inquiry-list">
        {% for info in new_info %}
        <li class="inquiry-item">
            <a href="{% url 'child_support_detail' info.pk %}" class="inquiry-link">{{ info.title }}</a> 
        </li>
        {% endfor %}
    </ul>

    <div class="pagination">
        <span class="step-links">
        {% if popular_inquiries.has_previous %}
            <a href="?page_popular={{ popular_inquiries.previous_page_number }}#popular_inquiries">&laquo; å‰ã¸</a>
        {% endif %}
        <span class="current">
            ãƒšãƒ¼ã‚¸ {{ popular_inquiries.number }} / {{ popular_inquiries.paginator.num_pages }}
        </span>
        {% if popular_inquiries.has_next %}
            <a href="?page_popular={{ popular_inquiries.next_page_number }}#popular_inquiries">æ¬¡ã¸ &raquo;</a>
        {% endif %}
        </span>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    if (window.location.hash) {
        const element = document.querySelector(window.location.hash);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth' });
        }
    }
});
</script>
{% endblock %}